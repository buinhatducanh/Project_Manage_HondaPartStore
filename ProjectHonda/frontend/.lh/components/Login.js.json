{
    "sourceFile": "components/Login.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1739378356796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739378703624,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,25 @@\n-import { useState } from \"react\";\r\n+import { useState, useEffect } from \"react\";\r\n import { useRouter } from \"next/router\";\r\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n+  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n   const router = useRouter();\r\n \r\n+  useEffect(() => {\r\n+    if (typeof window !== \"undefined\") {\r\n+      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+      setUser(storedUser);\r\n+    }\r\n+  }, []);\r\n+\r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n-    // Giả lập tài khoản admin & nhân viên (có thể thay bằng API gọi DB)\r\n+    // Giả lập tài khoản admin & nhân viên\r\n     const users = [\r\n       { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n       { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n     ];\r\n@@ -19,8 +27,9 @@\n     const user = users.find((u) => u.email === email && u.password === password);\r\n \r\n     if (user) {\r\n       localStorage.setItem(\"user\", JSON.stringify(user));\r\n+      setUser(user); // Cập nhật state để phản ánh dữ liệu mới\r\n       router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n     } else {\r\n       setError(\"Email hoặc mật khẩu không đúng!\");\r\n     }\r\n"
                },
                {
                    "date": 1739379047358,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,22 +4,23 @@\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n-  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n+  const [user, setUser] = useState(null);\r\n   const router = useRouter();\r\n \r\n+  // Kiểm tra nếu đã đăng nhập\r\n   useEffect(() => {\r\n     if (typeof window !== \"undefined\") {\r\n       const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n       setUser(storedUser);\r\n     }\r\n   }, []);\r\n \r\n+  // Hàm xử lý đăng nhập\r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n-    // Giả lập tài khoản admin & nhân viên\r\n     const users = [\r\n       { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n       { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n     ];\r\n@@ -27,52 +28,72 @@\n     const user = users.find((u) => u.email === email && u.password === password);\r\n \r\n     if (user) {\r\n       localStorage.setItem(\"user\", JSON.stringify(user));\r\n-      setUser(user); // Cập nhật state để phản ánh dữ liệu mới\r\n+      setUser(user);\r\n       router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n     } else {\r\n       setError(\"Email hoặc mật khẩu không đúng!\");\r\n     }\r\n   };\r\n \r\n+  // Hàm xử lý đăng xuất\r\n+  const handleLogout = () => {\r\n+    localStorage.removeItem(\"user\");\r\n+    setUser(null);\r\n+    router.push(\"/login\");\r\n+  };\r\n+\r\n   return (\r\n     <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n       <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n-        <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n-\r\n-        {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n-\r\n-        <form className=\"mt-6\" onSubmit={handleLogin}>\r\n-          <div>\r\n-            <label className=\"block text-gray-700\">Email</label>\r\n-            <input\r\n-              type=\"email\"\r\n-              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-              value={email}\r\n-              onChange={(e) => setEmail(e.target.value)}\r\n-              required\r\n-            />\r\n+        {user ? (\r\n+          // Nếu đã đăng nhập, hiển thị thông tin và nút Đăng xuất\r\n+          <div className=\"text-center\">\r\n+            <h2 className=\"text-2xl font-bold text-gray-800\">Xin chào, {user.email}!</h2>\r\n+            <p className=\"text-gray-600\">Bạn đang đăng nhập với vai trò <b>{user.role}</b></p>\r\n+            <button\r\n+              onClick={handleLogout}\r\n+              className=\"mt-6 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition\"\r\n+            >\r\n+              Đăng xuất\r\n+            </button>\r\n           </div>\r\n-\r\n-          <div className=\"mt-4\">\r\n-            <label className=\"block text-gray-700\">Mật khẩu</label>\r\n-            <input\r\n-              type=\"password\"\r\n-              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-              value={password}\r\n-              onChange={(e) => setPassword(e.target.value)}\r\n-              required\r\n-            />\r\n-          </div>\r\n-\r\n-          <button\r\n-            type=\"submit\"\r\n-            className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n-          >\r\n-            Đăng nhập\r\n-          </button>\r\n-        </form>\r\n+        ) : (\r\n+          // Nếu chưa đăng nhập, hiển thị form đăng nhập\r\n+          <>\r\n+            <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n+            {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n+            <form className=\"mt-6\" onSubmit={handleLogin}>\r\n+              <div>\r\n+                <label className=\"block text-gray-700\">Email</label>\r\n+                <input\r\n+                  type=\"email\"\r\n+                  className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+                  value={email}\r\n+                  onChange={(e) => setEmail(e.target.value)}\r\n+                  required\r\n+                />\r\n+              </div>\r\n+              <div className=\"mt-4\">\r\n+                <label className=\"block text-gray-700\">Mật khẩu</label>\r\n+                <input\r\n+                  type=\"password\"\r\n+                  className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+                  value={password}\r\n+                  onChange={(e) => setPassword(e.target.value)}\r\n+                  required\r\n+                />\r\n+              </div>\r\n+              <button\r\n+                type=\"submit\"\r\n+                className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n+              >\r\n+                Đăng nhập\r\n+              </button>\r\n+            </form>\r\n+          </>\r\n+        )}\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1739379099442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,80 @@\n+import { useState, useEffect } from \"react\";\r\n+import { useRouter } from \"next/router\";\r\n+\r\n+const Login = () => {\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n+  const [error, setError] = useState(\"\");\r\n+  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n+  const router = useRouter();\r\n+\r\n+  useEffect(() => {\r\n+    if (typeof window !== \"undefined\") {\r\n+      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+      setUser(storedUser);\r\n+    }\r\n+  }, []);\r\n+\r\n+  const handleLogin = (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    // Giả lập tài khoản admin & nhân viên\r\n+    const users = [\r\n+      { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n+      { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n+    ];\r\n+\r\n+    const user = users.find((u) => u.email === email && u.password === password);\r\n+\r\n+    if (user) {\r\n+      localStorage.setItem(\"user\", JSON.stringify(user));\r\n+      setUser(user); // Cập nhật state để phản ánh dữ liệu mới\r\n+      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n+    } else {\r\n+      setError(\"Email hoặc mật khẩu không đúng!\");\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n+      <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n+        <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n+\r\n+        {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n+\r\n+        <form className=\"mt-6\" onSubmit={handleLogin}>\r\n+          <div>\r\n+            <label className=\"block text-gray-700\">Email</label>\r\n+            <input\r\n+              type=\"email\"\r\n+              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+              value={email}\r\n+              onChange={(e) => setEmail(e.target.value)}\r\n+              required\r\n+            />\r\n+          </div>\r\n+\r\n+          <div className=\"mt-4\">\r\n+            <label className=\"block text-gray-700\">Mật khẩu</label>\r\n+            <input\r\n+              type=\"password\"\r\n+              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+              value={password}\r\n+              onChange={(e) => setPassword(e.target.value)}\r\n+              required\r\n+            />\r\n+          </div>\r\n+\r\n+          <button\r\n+            type=\"submit\"\r\n+            className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n+          >\r\n+            Đăng nhập\r\n+          </button>\r\n+        </form>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Login;\r\n"
                },
                {
                    "date": 1739379255844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,103 +1,19 @@\n import { useState, useEffect } from \"react\";\r\n import { useRouter } from \"next/router\";\r\n+import { isAdmin, getUserFromLocalStorage } from \"../utils/auth\"; \r\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n-  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n-  const router = useRouter();\r\n-\r\n-  useEffect(() => {\r\n-    if (typeof window !== \"undefined\") {\r\n-      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n-      setUser(storedUser);\r\n-    }\r\n-  }, []);\r\n-\r\n-  const handleLogin = (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    // Giả lập tài khoản admin & nhân viên\r\n-    const users = [\r\n-      { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n-      { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n-    ];\r\n-\r\n-    const user = users.find((u) => u.email === email && u.password === password);\r\n-\r\n-    if (user) {\r\n-      localStorage.setItem(\"user\", JSON.stringify(user));\r\n-      setUser(user); // Cập nhật state để phản ánh dữ liệu mới\r\n-      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n-    } else {\r\n-      setError(\"Email hoặc mật khẩu không đúng!\");\r\n-    }\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n-      <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n-        <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n-\r\n-        {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n-\r\n-        <form className=\"mt-6\" onSubmit={handleLogin}>\r\n-          <div>\r\n-            <label className=\"block text-gray-700\">Email</label>\r\n-            <input\r\n-              type=\"email\"\r\n-              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-              value={email}\r\n-              onChange={(e) => setEmail(e.target.value)}\r\n-              required\r\n-            />\r\n-          </div>\r\n-\r\n-          <div className=\"mt-4\">\r\n-            <label className=\"block text-gray-700\">Mật khẩu</label>\r\n-            <input\r\n-              type=\"password\"\r\n-              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-              value={password}\r\n-              onChange={(e) => setPassword(e.target.value)}\r\n-              required\r\n-            />\r\n-          </div>\r\n-\r\n-          <button\r\n-            type=\"submit\"\r\n-            className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n-          >\r\n-            Đăng nhập\r\n-          </button>\r\n-        </form>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Login;\r\n-import { useState, useEffect } from \"react\";\r\n-import { useRouter } from \"next/router\";\r\n-\r\n-const Login = () => {\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n-  const [error, setError] = useState(\"\");\r\n   const [user, setUser] = useState(null);\r\n   const router = useRouter();\r\n \r\n-  // Kiểm tra nếu đã đăng nhập\r\n   useEffect(() => {\r\n-    if (typeof window !== \"undefined\") {\r\n-      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n-      setUser(storedUser);\r\n-    }\r\n+    setUser(getUserFromLocalStorage());\r\n   }, []);\r\n \r\n-  // Hàm xử lý đăng nhập\r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n     const users = [\r\n@@ -109,15 +25,14 @@\n \r\n     if (user) {\r\n       localStorage.setItem(\"user\", JSON.stringify(user));\r\n       setUser(user);\r\n-      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n+      router.push(isAdmin() ? \"/admin\" : \"/\");\r\n     } else {\r\n       setError(\"Email hoặc mật khẩu không đúng!\");\r\n     }\r\n   };\r\n \r\n-  // Hàm xử lý đăng xuất\r\n   const handleLogout = () => {\r\n     localStorage.removeItem(\"user\");\r\n     setUser(null);\r\n     router.push(\"/login\");\r\n@@ -126,23 +41,27 @@\n   return (\r\n     <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n       <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n         {user ? (\r\n-          // Nếu đã đăng nhập, hiển thị thông tin và nút Đăng xuất\r\n           <div className=\"text-center\">\r\n-            <h2 className=\"text-2xl font-bold text-gray-800\">Xin chào, {user.email}!</h2>\r\n-            <p className=\"text-gray-600\">Bạn đang đăng nhập với vai trò <b>{user.role}</b></p>\r\n+            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n+              Xin chào, {user.email}!\r\n+            </h2>\r\n+            <p className=\"text-gray-600\">\r\n+              Bạn đang đăng nhập với vai trò <b>{user.role}</b>\r\n+            </p>\r\n             <button\r\n               onClick={handleLogout}\r\n               className=\"mt-6 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition\"\r\n             >\r\n               Đăng xuất\r\n             </button>\r\n           </div>\r\n         ) : (\r\n-          // Nếu chưa đăng nhập, hiển thị form đăng nhập\r\n           <>\r\n-            <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n+            <h2 className=\"text-2xl font-bold text-center text-gray-800\">\r\n+              Đăng nhập\r\n+            </h2>\r\n             {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n             <form className=\"mt-6\" onSubmit={handleLogin}>\r\n               <div>\r\n                 <label className=\"block text-gray-700\">Email</label>\r\n"
                },
                {
                    "date": 1739379266507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,25 @@\n import { useState, useEffect } from \"react\";\r\n import { useRouter } from \"next/router\";\r\n-import { isAdmin, getUserFromLocalStorage } from \"../utils/auth\"; \r\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n-  const [user, setUser] = useState(null);\r\n+  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n   const router = useRouter();\r\n \r\n   useEffect(() => {\r\n-    setUser(getUserFromLocalStorage());\r\n+    if (typeof window !== \"undefined\") {\r\n+      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+      setUser(storedUser);\r\n+    }\r\n   }, []);\r\n \r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n+    // Giả lập tài khoản admin & nhân viên\r\n     const users = [\r\n       { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n       { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n     ];\r\n@@ -24,75 +27,52 @@\n     const user = users.find((u) => u.email === email && u.password === password);\r\n \r\n     if (user) {\r\n       localStorage.setItem(\"user\", JSON.stringify(user));\r\n-      setUser(user);\r\n-      router.push(isAdmin() ? \"/admin\" : \"/\");\r\n+      setUser(user); // Cập nhật state để phản ánh dữ liệu mới\r\n+      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n     } else {\r\n       setError(\"Email hoặc mật khẩu không đúng!\");\r\n     }\r\n   };\r\n \r\n-  const handleLogout = () => {\r\n-    localStorage.removeItem(\"user\");\r\n-    setUser(null);\r\n-    router.push(\"/login\");\r\n-  };\r\n-\r\n   return (\r\n     <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n       <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n-        {user ? (\r\n-          <div className=\"text-center\">\r\n-            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n-              Xin chào, {user.email}!\r\n-            </h2>\r\n-            <p className=\"text-gray-600\">\r\n-              Bạn đang đăng nhập với vai trò <b>{user.role}</b>\r\n-            </p>\r\n-            <button\r\n-              onClick={handleLogout}\r\n-              className=\"mt-6 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition\"\r\n-            >\r\n-              Đăng xuất\r\n-            </button>\r\n+        <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n+\r\n+        {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n+\r\n+        <form className=\"mt-6\" onSubmit={handleLogin}>\r\n+          <div>\r\n+            <label className=\"block text-gray-700\">Email</label>\r\n+            <input\r\n+              type=\"email\"\r\n+              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+              value={email}\r\n+              onChange={(e) => setEmail(e.target.value)}\r\n+              required\r\n+            />\r\n           </div>\r\n-        ) : (\r\n-          <>\r\n-            <h2 className=\"text-2xl font-bold text-center text-gray-800\">\r\n-              Đăng nhập\r\n-            </h2>\r\n-            {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n-            <form className=\"mt-6\" onSubmit={handleLogin}>\r\n-              <div>\r\n-                <label className=\"block text-gray-700\">Email</label>\r\n-                <input\r\n-                  type=\"email\"\r\n-                  className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-                  value={email}\r\n-                  onChange={(e) => setEmail(e.target.value)}\r\n-                  required\r\n-                />\r\n-              </div>\r\n-              <div className=\"mt-4\">\r\n-                <label className=\"block text-gray-700\">Mật khẩu</label>\r\n-                <input\r\n-                  type=\"password\"\r\n-                  className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n-                  value={password}\r\n-                  onChange={(e) => setPassword(e.target.value)}\r\n-                  required\r\n-                />\r\n-              </div>\r\n-              <button\r\n-                type=\"submit\"\r\n-                className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n-              >\r\n-                Đăng nhập\r\n-              </button>\r\n-            </form>\r\n-          </>\r\n-        )}\r\n+\r\n+          <div className=\"mt-4\">\r\n+            <label className=\"block text-gray-700\">Mật khẩu</label>\r\n+            <input\r\n+              type=\"password\"\r\n+              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n+              value={password}\r\n+              onChange={(e) => setPassword(e.target.value)}\r\n+              required\r\n+            />\r\n+          </div>\r\n+\r\n+          <button\r\n+            type=\"submit\"\r\n+            className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n+          >\r\n+            Đăng nhập\r\n+          </button>\r\n+        </form>\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1739450349999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,10 @@\n       setUser(storedUser);\r\n     }\r\n   }, []);\r\n \r\n+  \r\n+\r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n     // Giả lập tài khoản admin & nhân viên\r\n"
                },
                {
                    "date": 1739450589379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n   const router = useRouter();\r\n \r\n   useEffect(() => {\r\n     if (typeof window !== \"undefined\") {\r\n+      console.log()\r\n       const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n       setUser(storedUser);\r\n     }\r\n   }, []);\r\n"
                },
                {
                    "date": 1739722401189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,11 @@\n       console.log()\r\n       const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n       setUser(storedUser);\r\n     }\r\n+    const fetchUsers = async()=>{\r\n+      \r\n+    }\r\n   }, []);\r\n \r\n   \r\n \r\n"
                },
                {
                    "date": 1739722534654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,15 @@\n       const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n       setUser(storedUser);\r\n     }\r\n     const fetchUsers = async()=>{\r\n-      \r\n+      try{\r\n+\r\n+      }catch{\r\n+\r\n+      }finally{\r\n+        \r\n+      }\r\n     }\r\n   }, []);\r\n \r\n   \r\n"
                },
                {
                    "date": 1739723097158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import { useState, useEffect } from \"react\";\r\n import { useRouter } from \"next/router\";\r\n+import axios from \"axios\";\r\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n@@ -15,11 +16,11 @@\n       setUser(storedUser);\r\n     }\r\n     const fetchUsers = async()=>{\r\n       try{\r\n-\r\n-      }catch{\r\n-\r\n+        const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n+      }catch(error){\r\n+        console.log(error);\r\n       }finally{\r\n         \r\n       }\r\n     }\r\n"
                },
                {
                    "date": 1739723116659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,12 +19,11 @@\n       try{\r\n         const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n       }catch(error){\r\n         console.log(error);\r\n-      }finally{\r\n-        \r\n       }\r\n     }\r\n+    fetchUsers();\r\n   }, []);\r\n \r\n   \r\n \r\n"
                },
                {
                    "date": 1739723201818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n   const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n+  const users = [];\r\n   const router = useRouter();\r\n \r\n   useEffect(() => {\r\n     if (typeof window !== \"undefined\") {\r\n@@ -17,8 +18,9 @@\n     }\r\n     const fetchUsers = async()=>{\r\n       try{\r\n         const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n+\r\n       }catch(error){\r\n         console.log(error);\r\n       }\r\n     }\r\n@@ -30,12 +32,9 @@\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n \r\n     // Giả lập tài khoản admin & nhân viên\r\n-    const users = [\r\n-      { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n-      { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n-    ];\r\n+    \r\n \r\n     const user = users.find((u) => u.email === email && u.password === password);\r\n \r\n     if (user) {\r\n"
                },
                {
                    "date": 1739723226519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     }\r\n     const fetchUsers = async()=>{\r\n       try{\r\n         const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n-\r\n+        users.push(data)\r\n       }catch(error){\r\n         console.log(error);\r\n       }\r\n     }\r\n"
                },
                {
                    "date": 1739723580906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,33 @@\n-import { useState, useEffect } from \"react\";\r\n-import { useRouter } from \"next/router\";\r\n-import axios from \"axios\";\r\n+  import { useState, useEffect } from \"react\";\r\n+  import { useRouter } from \"next/router\";\r\n+  import axios from \"axios\";\r\n \r\n-const Login = () => {\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n-  const [error, setError] = useState(\"\");\r\n-  const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n-  const users = [];\r\n-  const router = useRouter();\r\n+  const Login = () => {\r\n+    const [email, setEmail] = useState(\"\");\r\n+    const [password, setPassword] = useState(\"\");\r\n+    const [error, setError] = useState(\"\");\r\n+    const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n+    const router = useRouter();\r\n \r\n-  useEffect(() => {\r\n-    if (typeof window !== \"undefined\") {\r\n-      console.log()\r\n-      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n-      setUser(storedUser);\r\n-    }\r\n-    const fetchUsers = async()=>{\r\n-      try{\r\n-        const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n-        users.push(data)\r\n-      }catch(error){\r\n-        console.log(error);\r\n+    useEffect(() => {\r\n+      if (typeof window !== \"undefined\") {\r\n+        console.log()\r\n+        const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+        setUser(storedUser);\r\n       }\r\n-    }\r\n-    fetchUsers();\r\n-  }, []);\r\n \r\n+      const fetchUsers = async()=>{\r\n+        try{\r\n+          const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n+          users.push(data)\r\n+        }catch(error){\r\n+          console.log(error);\r\n+        }\r\n+      }\r\n+      fetchUsers();\r\n+    }, []);\r\n+\r\n   \r\n \r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n"
                },
                {
                    "date": 1739723656133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,33 @@\n-  import { useState, useEffect } from \"react\";\r\n-  import { useRouter } from \"next/router\";\r\n-  import axios from \"axios\";\r\n+import { useState, useEffect } from \"react\";\r\n+import { useRouter } from \"next/router\";\r\n+import axios from \"axios\";\r\n \r\n-  const Login = () => {\r\n-    const [email, setEmail] = useState(\"\");\r\n-    const [password, setPassword] = useState(\"\");\r\n-    const [error, setError] = useState(\"\");\r\n-    const [user, setUser] = useState(null); // Tránh truy cập localStorage trực tiếp khi SSR\r\n-    const router = useRouter();\r\n+const Login = () => {\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n+  const [error, setError] = useState(\"\");\r\n+  const [user, setUser] = useState(null);\r\n+  const [users, setUsers] = useState([]);  // ✅ Dùng state để lưu danh sách người dùng\r\n+  const router = useRouter();\r\n \r\n-    useEffect(() => {\r\n-      if (typeof window !== \"undefined\") {\r\n-        console.log()\r\n-        const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n-        setUser(storedUser);\r\n-      }\r\n+  useEffect(() => {\r\n+    if (typeof window !== \"undefined\") {\r\n+      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+      setUser(storedUser);\r\n+    }\r\n \r\n-      const fetchUsers = async()=>{\r\n-        try{\r\n-          const {data} = await axios.get(\"http://localhost:5000/api/users\")\r\n-          users.push(data)\r\n-        }catch(error){\r\n-          console.log(error);\r\n-        }\r\n+    const fetchUsers = async () => {\r\n+      try {\r\n+        const { data } = await axios.get(\"http://localhost:5000/api/users\");\r\n+        setUsers(data);  // ✅ Cập nhật state thay vì push\r\n+      } catch (error) {\r\n+        console.log(error);\r\n       }\r\n-      fetchUsers();\r\n-    }, []);\r\n-\r\n+    };\r\n+    \r\n+    fetchUsers();\r\n+  }, []);\r\n   \r\n \r\n   const handleLogin = (e) => {\r\n     e.preventDefault();\r\n"
                },
                {
                    "date": 1739723812953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n \r\n   useEffect(() => {\r\n     if (typeof window !== \"undefined\") {\r\n       const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+      console.log(storedUser)\r\n       setUser(storedUser);\r\n     }\r\n \r\n     const fetchUsers = async () => {\r\n"
                },
                {
                    "date": 1741568428627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n+  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n   const [user, setUser] = useState(null);\r\n   const [users, setUsers] = useState([]);  // ✅ Dùng state để lưu danh sách người dùng\r\n   const router = useRouter();\r\n \r\n"
                }
            ],
            "date": 1739378356796,
            "name": "Commit-0",
            "content": "import { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Giả lập tài khoản admin & nhân viên (có thể thay bằng API gọi DB)\r\n    const users = [\r\n      { email: \"admin@gmail.com\", password: \"admin123\", role: \"admin\" },\r\n      { email: \"staff@gmail.com\", password: \"staff123\", role: \"staff\" },\r\n    ];\r\n\r\n    const user = users.find((u) => u.email === email && u.password === password);\r\n\r\n    if (user) {\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\r\n    } else {\r\n      setError(\"Email hoặc mật khẩu không đúng!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n      <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n        <h2 className=\"text-2xl font-bold text-center text-gray-800\">Đăng nhập</h2>\r\n\r\n        {error && <p className=\"text-red-500 text-center mt-2\">{error}</p>}\r\n\r\n        <form className=\"mt-6\" onSubmit={handleLogin}>\r\n          <div>\r\n            <label className=\"block text-gray-700\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mt-4\">\r\n            <label className=\"block text-gray-700\">Mật khẩu</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"mt-1 w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\r\n          >\r\n            Đăng nhập\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"
        }
    ]
}